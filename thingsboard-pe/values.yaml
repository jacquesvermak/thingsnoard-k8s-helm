# Global configuration
global:
  namespace: thingsboard-qa
  imageRegistry: ""
  imagePullSecrets: []

# ThingsBoard configuration
thingsboard:
  image:
    registry: docker.io/thingsboard/tb-pe-node
    tag: "4.0.1PE"
    pullPolicy: IfNotPresent
  
  # Core service configuration
  node:
    enabled: true
    replicas: 1
    resources:
      limits:
        cpu: "12"
        memory: 25Gi
      requests:
        cpu: "6"
        memory: 20Gi
    
    # DTLS Configuration
    dtls:
      enabled: true
      certificatesConfigMap: coap-pem-configmap
      
    # Environment variables
    env:
      TB_LICENSE_SECRET: "biGeBHrEO4LaxCqPQa9imyFL"
      TB_LICENSE_VALIDATION_ENABLED: "false"
      SWAGGER_ENABLED: "true"
      TB_KAFKA_SERVERS: "thingsboard-kafka:9092"
      COAP_TRANSPORT_HOST: "thingsboard-coap.thingsboard-qa.svc.cluster.local"
      
  # Transport services
  transports:
    coap:
      enabled: true
      replicas: 4
      image:
        registry: docker.io/thingsboard/tb-pe-coap-transport
        tag: "4.0.1PE"
      port: 5684
      dtlsEnabled: true
      service:
        type: LoadBalancer
        annotations:
          service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
      resources:
        limits:
          cpu: 410m
          memory: 8Gi
        requests:
          cpu: 410m
          memory: 8Gi
      env:
        TB_KAFKA_SERVERS: "thingsboard-kafka:9092"
        COAP_TRANSPORT_HOST: "thingsboard-coap.thingsboard-qa.svc.cluster.local"
        COAP_TIMEOUT: "60000"
        TB_QUEUE_REQUEST_TIMEOUT: "120000"

# Database configuration
cassandra:
  enabled: true
  cluster:
    name: cassandra
    datacenter: dc1
    rack: rack1

# Message queue configuration
kafka:
  enabled: true
  replicas: 3

# Cache configuration
redis:
  enabled: true

# Zookeeper configuration
zookeeper:
  enabled: true
  replicas: 3

# Web UI configuration
webui:
  enabled: true
  replicas: 1
  service:
    type: LoadBalancer
    port: 8080

# Security
security:
  certificates:
    enabled: true
    dtls:
      serverCert: |
        -----BEGIN CERTIFICATE-----
        MIIBdTCCAZsCFENbCvDkHJ//r9nuIDynYYlYpAzzMAoGCCqGSM49BAMCMH0xCzAJ
        BgNVBAYTAlpBMRUwEwYDVQQIDAxXZXN0ZXJuIENhcGUxEjAQBgNVBAcMCUNhcGUg
        VG93bjESMBAGA1UECgwJU3RhZ2VaZXJvMQ0wCwYDVQQLDARDb0FQMSAwHgYDVQQD
        DBdjb2FwLnFhLnN0YWdlemVyby5jby56YTAeFw0yNDExMTIwNjA0MjBaFw0yNTEx
        MTIwNjA0MjBaMH0xCzAJBgNVBAYTAlpBMRUwEwYDVQQIDAxXZXN0ZXJuIENhcGUx
        EjAQBgNVBAcMCUNhcGUgVG93bjESMBAGA1UECgwJU3RhZ2VaZXJvMQ0wCwYDVQQL
        DARDb0FQMSAwHgYDVQQDDBdjb2FwLnFhLnN0YWdlemVyby5jby56YTBZMBMGByqG
        SM49AgEGCCqGSM49AwEHA0IABMdgAHc1Y4LoOPZ5x0eiypYx2veZaKpQKq7djXt6
        rZOUD7u35YMTkDtJ/7Obq+TxQR5c52Elj65u+zW0yrANU80wCgYIKoZIzj0EAwID
        SAAwRQIhAO3qH7xjVewGUmqpJCQdLOv4XVPqiBtlJ69hzP/BXOz9AiAxJG1wPKkw
        P5cjGDZCEOJZ1cX3myRk6SdB3Qwjm7MxHA==
        -----END CERTIFICATE-----
      serverKey: |
        -----BEGIN EC PARAMETERS-----
        BggqhkjOPQMBBw==
        -----END EC PARAMETERS-----
        -----BEGIN EC PRIVATE KEY-----
        MHcCAQEEINj2OLQ2wOSSELhxVe8M+/28oA6pGa/nBGoERspT8dU1oAoGCCqGSM49
        AwEHoUQDQgAEx2AAdzVjgug49nnHR6LKljHa95loqlAqrt2Ne3qtk5QPu7flgxOQ
        O0n/s5ur5PFBHlznYSWPrm77NbTKsA1TzQ==
        -----END EC PRIVATE KEY-----
